<section aria-label="Paginación de Incidencias" th:fragment="paginacion" class="bg-white rounded-3 shadow-sm p-3 mt-4">

    <div class="d-flex flex-wrap justify-content-between align-items-center gap-3">

        <!-- Selector de elementos por página -->
        <form method="get" class="d-flex align-items-center gap-2" role="form" onsubmit="handleFormSubmit(event)"
            aria-label="Seleccionar elementos por página">
            <label for="perPage" class="form-label mb-0 small">
                Elementos por página:
            </label>
            <input type="number" id="perPage" name="perPage" class="form-control form-control-sm w-auto" min="1"
                max="100" th:value="${perPage}" onchange="handleInputChange()" aria-describedby="perPageHelp"
                inputmode="numeric" pattern="\d+">
        </form>

        <!-- Indicador de elementos actuales -->
        <p class="text-muted small mb-0" id="perPageHelp" aria-live="polite">
            Mostrando <span th:text="${mostrandoAhora}">5</span>
            <span th:text="${mostrandoAhora == 1 ? 'elemento' : 'elementos'}">elementos</span>
        </p>

        <!-- Navegación entre páginas -->
        <nav aria-label="Navegación de páginas">
            <ul class="pagination mb-0 h-auto" role="navigation">

                <!-- Página anterior -->
                <li class="page-item" th:classappend="${paginaActual == 1} ? 'disabled'"
                    th:aria-disabled="${paginaActual == 1}" aria-label="Página anterior">
                    <button type="button" class="page-link d-flex justify-content-center align-items-center h-100"
                        th:data-page="${paginaActual-1}" onclick="changePage(this)" th:disabled="${paginaActual == 1}">
                        <i class="bi bi-chevron-left" aria-hidden="true"></i>
                        <span class="visually-hidden">Anterior</span>
                    </button>
                </li>

                <!-- Número de página actual -->
                <li class="page-item">
                    <label for="paginaSeleccionada" class="visually-hidden">Página actual</label>
                    <span class="page-link text-secondary h-100 d-flex align-items-center gap-1">
                        <input type="number" id="paginaSeleccionada" name="paginaSeleccionada" min="1"
                            th:attr="max=${paginaFinal}" th:data-paginaActual="${paginaActual}"
                            class="form-control form-control-sm text-center w-auto" th:value="${paginaActual}"
                            onchange="goToPage()" inputmode="numeric" pattern="\d+"
                            aria-label="Seleccionar página actual">
                        <span class="small">de <span th:text="${paginaFinal}">10</span></span>
                    </span>
                </li>

                <!-- Página siguiente -->
                <li class="page-item" th:classappend="${paginaActual == paginaFinal} ? 'disabled'"
                    th:aria-disabled="${paginaActual == paginaFinal}" aria-label="Página siguiente">
                    <button type="button" class="page-link d-flex justify-content-center align-items-center h-100"
                        th:data-page="${paginaActual+1}" onclick="changePage(this)"
                        th:disabled="${paginaActual == paginaFinal}">
                        <i class="bi bi-chevron-right" aria-hidden="true"></i>
                        <span class="visually-hidden">Siguiente</span>
                    </button>
                </li>

            </ul>
        </nav>
    </div>
</section>